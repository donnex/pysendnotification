#!/usr/bin/env python

import logging
import argparse
from sendnotification import SendNotification

if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='Send notification')
    parser.add_argument('-i', '--interval', type=int,
                       help='Set the notification interval in seconds')
    parser.add_argument('-v', '--verbose', action='store_true',
                       help='Verbose debug output')
    parser.add_argument('-c', '--conf',
                       help='Conf file to use')
    parser.add_argument('message',
                        help='The notification message')

    args = parser.parse_args()

    if args.verbose:
        logging.basicConfig(level=logging.DEBUG,
                    format='%(asctime)s - %(levelname)s - %(message)s',
                    datefmt='%Y-%m-%d %H:%M:%S')
    else:
        logging.basicConfig(level=logging.WARNING,
                    format='%(asctime)s - %(levelname)s - %(message)s',
                    datefmt='%Y-%m-%d %H:%M:%S')

    sn = SendNotification(conf=args.conf)
    sn.send_notification(args.message, interval=args.interval)
